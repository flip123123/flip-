
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../HTML/html5/">
      
      
        <link rel="next" href="../css/css1/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>makefile - flip的小站</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="purple" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#makefile" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="flip的小站" class="md-header__button md-logo" aria-label="flip的小站" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            flip的小站
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              makefile
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  主页

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../site/" class="md-tabs__link">
        
  
  
    
  
  好用的网址

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../xc/" class="md-tabs__link">
          
  
  
    
  
  学习

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../words/word1/" class="md-tabs__link">
          
  
  
    
  
  一些talks

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="flip的小站" class="md-nav__button md-logo" aria-label="flip的小站" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    flip的小站
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    主页
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../site/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    好用的网址
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    学习
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            学习
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    形策一
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ai/ai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    人工智能基础A
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../md/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    markdown
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    html语法
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            html语法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../HTML/html1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6.16
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../HTML/html2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6.17
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../HTML/html3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6.18
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../HTML/html4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6.22
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../HTML/html5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6.23
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    makefile
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    makefile
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#makefile" class="md-nav__link">
    <span class="md-ellipsis">
      Makefile 规则
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Makefile 规则">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      一个示例：
    </span>
  </a>
  
    <nav class="md-nav" aria-label="一个示例：">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      第一部分：目标文件和最终可执行文件的定义与构建规则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#o" class="md-nav__link">
    <span class="md-ellipsis">
      第二部分：各个 .o 目标文件的编译规则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      第三部分：清理规则
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#makefile_1" class="md-nav__link">
    <span class="md-ellipsis">
      Makefile里有什么？
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      工作方式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      书写规则
    </span>
  </a>
  
    <nav class="md-nav" aria-label="书写规则">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      规则举例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      规则的语法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      在规则中使用通配符
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      伪目标
    </span>
  </a>
  
    <nav class="md-nav" aria-label="伪目标">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      为什么需要伪目标？
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      注
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    css
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            css
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../css/css1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6.25
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../css/css2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6.26
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../css/css3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6.27
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../css/css4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7.1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../css/css5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7.3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../css/css6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7.4
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    一些talks
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            一些talks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../words/word1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    乱七八糟
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../words/word2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    工高被刷
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../words/word3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    和gsy老师
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../words/word4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    社团中心
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../words/word5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    是非正缘
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#makefile" class="md-nav__link">
    <span class="md-ellipsis">
      Makefile 规则
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Makefile 规则">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      一个示例：
    </span>
  </a>
  
    <nav class="md-nav" aria-label="一个示例：">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      第一部分：目标文件和最终可执行文件的定义与构建规则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#o" class="md-nav__link">
    <span class="md-ellipsis">
      第二部分：各个 .o 目标文件的编译规则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      第三部分：清理规则
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#makefile_1" class="md-nav__link">
    <span class="md-ellipsis">
      Makefile里有什么？
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      工作方式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      书写规则
    </span>
  </a>
  
    <nav class="md-nav" aria-label="书写规则">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      规则举例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      规则的语法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      在规则中使用通配符
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      伪目标
    </span>
  </a>
  
    <nav class="md-nav" aria-label="伪目标">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      为什么需要伪目标？
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      注
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>makefile</h1>

<div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;">
<p>:material-circle-edit-outline: 约 3644 个字 :fontawesome-solid-code: 68 行代码 :material-clock-time-two-outline: 预计阅读时间 13 分钟</p>
</div>
<h2 id="makefile">Makefile 规则</h2>
<p>target ... : prerequisites ...</p>
<p>command</p>
<p>...</p>
<p>...</p>
<ul>
<li>target是一个目标文件，可以是Object File，也可以是执行文件。还可以是一个标签（Label）</li>
<li>prerequisites是，要生成那个target所需要的文件或是目标。</li>
<li>command是make需要执行的命令</li>
</ul>
<p>也就是说，target这一个或多个的目标文件依赖于prerequisites中的文件，其生成规则定义在command中。 说白一点就是说，<strong>prerequisites中如果有一个以上的文件比target文件要新的话，command所定义的命令就会被执行，</strong> 这就是 Makefile的规则。也就是Makefile中最核心的内容。</p>
<h3 id="_1">一个示例：</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">edit </span><span class="o">:</span><span class="w"> </span><span class="n">main</span>.<span class="n">o</span> <span class="n">kbd</span>.<span class="n">o</span> <span class="n">command</span>.<span class="n">o</span> <span class="n">display</span>.<span class="n">o</span> \
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="n">insert</span>.<span class="n">o</span> <span class="n">search</span>.<span class="n">o</span> <span class="n">files</span>.<span class="n">o</span> <span class="n">utils</span>.<span class="n">o</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="err">cc</span><span class="w"> </span><span class="err">-o</span><span class="w"> </span><span class="err">edit</span><span class="w"> </span><span class="err">main.o</span><span class="w"> </span><span class="err">kbd.o</span><span class="w"> </span><span class="err">command.o</span><span class="w"> </span><span class="err">display.o</span><span class="w"> </span><span class="err">\</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="err">insert.o</span><span class="w"> </span><span class="err">search.o</span><span class="w"> </span><span class="err">files.o</span><span class="w"> </span><span class="err">utils.o</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="nf">main.o </span><span class="o">:</span><span class="w"> </span><span class="n">main</span>.<span class="n">c</span> <span class="n">defs</span>.<span class="n">h</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="err">cc</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">main.c</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="nf">kbd.o </span><span class="o">:</span><span class="w"> </span><span class="n">kbd</span>.<span class="n">c</span> <span class="n">defs</span>.<span class="n">h</span> <span class="n">command</span>.<span class="n">h</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="err">cc</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">kbd.c</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="nf">command.o </span><span class="o">:</span><span class="w"> </span><span class="n">command</span>.<span class="n">c</span> <span class="n">defs</span>.<span class="n">h</span> <span class="n">command</span>.<span class="n">h</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="err">cc</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">command.c</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="nf">display.o </span><span class="o">:</span><span class="w"> </span><span class="n">display</span>.<span class="n">c</span> <span class="n">defs</span>.<span class="n">h</span> <span class="n">buffer</span>.<span class="n">h</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="err">cc</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">display.c</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="nf">insert.o </span><span class="o">:</span><span class="w"> </span><span class="n">insert</span>.<span class="n">c</span> <span class="n">defs</span>.<span class="n">h</span> <span class="n">buffer</span>.<span class="n">h</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="err">cc</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">insert.c</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="nf">search.o </span><span class="o">:</span><span class="w"> </span><span class="n">search</span>.<span class="n">c</span> <span class="n">defs</span>.<span class="n">h</span> <span class="n">buffer</span>.<span class="n">h</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="err">cc</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">search.c</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="nf">files.o </span><span class="o">:</span><span class="w"> </span><span class="n">files</span>.<span class="n">c</span> <span class="n">defs</span>.<span class="n">h</span> <span class="n">buffer</span>.<span class="n">h</span> <span class="n">command</span>.<span class="n">h</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="err">cc</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">files.c</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="nf">utils.o </span><span class="o">:</span><span class="w"> </span><span class="n">utils</span>.<span class="n">c</span> <span class="n">defs</span>.<span class="n">h</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="err">cc</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">utils.c</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="nf">clean </span><span class="o">:</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="err">rm</span><span class="w"> </span><span class="err">edit</span><span class="w"> </span><span class="err">main.o</span><span class="w"> </span><span class="err">kbd.o</span><span class="w"> </span><span class="err">command.o</span><span class="w"> </span><span class="err">display.o</span><span class="w"> </span><span class="err">\</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="nf">insert.o search.o files.o utils.ocommand.o </span><span class="o">:</span><span class="w"> </span><span class="n">defs</span>.<span class="n">h</span> <span class="n">command</span>.<span class="n">h</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="nf">display.o </span><span class="o">:</span><span class="w"> </span><span class="n">defs</span>.<span class="n">h</span> <span class="n">buffer</span>.<span class="n">h</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="nf">insert.o </span><span class="o">:</span><span class="w"> </span><span class="n">defs</span>.<span class="n">h</span> <span class="n">buffer</span>.<span class="n">h</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="nf">search.o </span><span class="o">:</span><span class="w"> </span><span class="n">defs</span>.<span class="n">h</span> <span class="n">buffer</span>.<span class="n">h</span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="nf">files.o </span><span class="o">:</span><span class="w"> </span><span class="n">defs</span>.<span class="n">h</span> <span class="n">buffer</span>.<span class="n">h</span> <span class="n">command</span>.<span class="n">h</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="nf">utils.o </span><span class="o">:</span><span class="w"> </span><span class="n">defs</span>.<span class="n">h</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="nf">.PHONY </span><span class="o">:</span><span class="w"> </span><span class="n">clean</span>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="nf">clean </span><span class="o">:</span>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a><span class="err">rm</span><span class="w"> </span><span class="err">edit</span><span class="w"> </span><span class="k">$(</span><span class="nv">objects</span><span class="k">)</span>
</code></pre></div>
<p>现在我们逐行来分析</p>
<h4 id="_2"><strong>第一部分：目标文件和最终可执行文件的定义与构建规则</strong></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nf">edit </span><span class="o">:</span><span class="w"> </span><span class="n">main</span>.<span class="n">o</span> <span class="n">kbd</span>.<span class="n">o</span> <span class="n">command</span>.<span class="n">o</span> <span class="n">display</span>.<span class="n">o</span> \
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">insert</span>.<span class="n">o</span> <span class="n">search</span>.<span class="n">o</span> <span class="n">files</span>.<span class="n">o</span> <span class="n">utils</span>.<span class="n">o</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span>cc<span class="w"> </span>-o<span class="w"> </span>edit<span class="w"> </span>main.o<span class="w"> </span>kbd.o<span class="w"> </span>command.o<span class="w"> </span>display.o<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span>insert.o<span class="w"> </span>search.o<span class="w"> </span>files.o<span class="w"> </span>utils.o
</code></pre></div>
<ul>
<li><strong><code>edit</code></strong>: 这是规则的<strong>目标 (Target)</strong> ，表示我们要构建一个名为edit的文件</li>
<li><strong><code>main.o kbd.o command.o display.o \</code></strong> : 这是目标 <code>edit</code> 的<strong>依赖项 (Prerequisites)</strong> 。这些是 <code>.o</code> 文件，表示它们是编译过程中生成的目标代码文件。反斜杠 <code>\</code> 表示这一行延续到下一行。</li>
</ul>
<p><strong>整体含义</strong>: 这条规则说明，要生成名为 <code>edit</code> 的可执行文件，必须先有 <code>main.o</code>, <code>kbd.o</code>, <code>command.o</code>, <code>display.o</code>, <code>insert.o</code>, <code>search.o</code>, <code>files.o</code>, 和 <code>utils.o</code> 这几个目标文件</p>
<ul>
<li><strong><code>cc</code></strong>: 这是要执行的<strong>命令 (Command)</strong> 。<code>cc</code> 通常是 C 语言编译器的命令（在很多系统上，<code>cc</code> 是 <code>gcc</code> 的一个符号链接或别名）。</li>
<li><strong><code>-o edit</code></strong>: 这是编译器的选项，表示将链接的结果输出到名为 <code>edit</code> 的文件中。</li>
<li><strong><code>main.o kbd.o command.o display.o \</code></strong> : 这是链接器需要的输入文件，即所有编译好的目标文件</li>
</ul>
<p><strong>整体含义</strong>: 如果上述所有 <code>.o</code> 文件都存在（并且比 <code>edit</code> 文件新，或者 <code>edit</code> 不存在），则执行此命令来将所有 <code>.o</code> 文件链接成一个名为 <code>edit</code> 的可执行程序。这是<strong>链接 (Linking)</strong>  步骤。</p>
<h4 id="o">第二部分：各个 <code>.o</code> 目标文件的编译规则</h4>
<p>使用了 <strong>隐式规则</strong> 的语法格式</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nf">main.o </span><span class="o">:</span><span class="w"> </span><span class="n">main</span>.<span class="n">c</span> <span class="n">defs</span>.<span class="n">h</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="err">cc</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">main.c</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="nf">kbd.o </span><span class="o">:</span><span class="w"> </span><span class="n">kbd</span>.<span class="n">c</span> <span class="n">defs</span>.<span class="n">h</span> <span class="n">command</span>.<span class="n">h</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="err">cc</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">kbd.c</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="nf">command.o </span><span class="o">:</span><span class="w"> </span><span class="n">command</span>.<span class="n">c</span> <span class="n">defs</span>.<span class="n">h</span> <span class="n">command</span>.<span class="n">h</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="err">cc</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">command.c</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="nf">display.o </span><span class="o">:</span><span class="w"> </span><span class="n">display</span>.<span class="n">c</span> <span class="n">defs</span>.<span class="n">h</span> <span class="n">buffer</span>.<span class="n">h</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="err">cc</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">display.c</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="nf">insert.o </span><span class="o">:</span><span class="w"> </span><span class="n">insert</span>.<span class="n">c</span> <span class="n">defs</span>.<span class="n">h</span> <span class="n">buffer</span>.<span class="n">h</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="err">cc</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">insert.c</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="nf">search.o </span><span class="o">:</span><span class="w"> </span><span class="n">search</span>.<span class="n">c</span> <span class="n">defs</span>.<span class="n">h</span> <span class="n">buffer</span>.<span class="n">h</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="err">cc</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">search.c</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="nf">files.o </span><span class="o">:</span><span class="w"> </span><span class="n">files</span>.<span class="n">c</span> <span class="n">defs</span>.<span class="n">h</span> <span class="n">buffer</span>.<span class="n">h</span> <span class="n">command</span>.<span class="n">h</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="err">cc</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">files.c</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="nf">utils.o </span><span class="o">:</span><span class="w"> </span><span class="n">utils</span>.<span class="n">c</span> <span class="n">defs</span>.<span class="n">h</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="err">cc</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">utils.c</span>
</code></pre></div>
<p>这一块就是在指明，每一个中间文件所依赖的源文件和头文件</p>
<p>cc指的是c编译器，-c 只进行编译不进行链接，比如main,c会生成main.o</p>
<h4 id="_3">第三部分：清理规则</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nf">clean </span><span class="o">:</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span>rm<span class="w"> </span>edit<span class="w"> </span>main.o<span class="w"> </span>kbd.o<span class="w"> </span>command.o<span class="w"> </span>display.o<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span>insert.o<span class="w"> </span>search.o<span class="w"> </span>files.o<span class="w"> </span>utils.o
</code></pre></div>
<ul>
<li>
<p><strong><code>clean :</code></strong> :</p>
</li>
<li>
<p><strong>目标</strong>: <code>clean</code>。这是一个<strong>伪目标 (Phony Target)</strong> ，因为它本身并不对应一个实际存在的文件。它代表一个动作。</p>
</li>
<li><strong>依赖项</strong>: 没有明确列出依赖项。</li>
<li><strong>意义</strong>: 当你执行 <code>make clean</code> 命令时，会触发这个规则。</li>
<li>
<p><strong><code>rm edit main.o kbd.o command.o display.o \</code></strong></p>
</li>
<li>
<p><strong><code>rm</code></strong>: 这是 <strong>remove</strong> 命令，用于删除文件。</p>
</li>
<li><strong><code>edit main.o kbd.o command.o display.o \</code></strong> : 这是要删除的文件列表。反斜杠表示延续。</li>
<li><strong><code>insert.o search.o files.o utils.o</code></strong>: 这是要删除文件的列表延续。</li>
<li><strong>意义</strong>: 清除所有在构建过程中生成的文件（最终的可执行文件 <code>edit</code> 和所有的目标文件 <code>.o</code>）</li>
</ul>
<h3 id="makefile_1">Makefile里有什么？</h3>
<p>Makefile里主要包含了五个东西：显式规则、隐晦规则、变量定义、文件指示和注释。</p>
<p>1、显式规则。显式规则说明了，如何生成一个或多的的目标文件。这是由Makefile的书写者明显指出，要生成的文件，文件的依赖文件，生成的命令。</p>
<p>2、隐晦规则。由于我们的make有自动推导的功能，所以隐晦的规则可以让我们比较粗糙地简略地书写Makefile，这是由make所支持的。</p>
<p>3、变量的定义。在Makefile中我们要定义一系列的变量，变量一般都是字符串，这个有点你C语言中的宏，当Makefile被执行时，其中的变量都会被扩展到相应的引用位置上。</p>
<p>4、文件指示。其包括了三个部分，一个是在一个Makefile中引用另一个Makefile，就像C语言中的include一样；另一个是指根据某些情 况指定Makefile中的有效部分，</p>
<p>就像C语言中的预编译#if一样；还有就是定义一个多行的命令。有关这一部分的内容，我会在后续的部分中讲述。</p>
<p>5、注释。Makefile中只有行注释，和UNIX的Shell脚本一样，其注释是用“#”字符，这个就像C/C++中的“//”一样。如果你要在你的Makefile中使用“<a href="http://tieba.baidu.com/hottopic/browse/hottopic?topic_id=0&amp;topic_name=%E2%80%9D%E5%AD%97%E7%AC%A6%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%94%A8%E5%8F%8D%E6%96%9C%E6%A1%86%E8%BF%9B%E8%A1%8C%E8%BD%AC%E4%B9%89%EF%BC%8C%E5%A6%82%EF%BC%9A%E2%80%9C%5C&amp;is_video_topic=0">#”字符，可以用反斜框进行转义，如：</a><code>\#</code>。</p>
<h3 id="_4">工作方式</h3>
<ol>
<li>读入所有的Makefile。</li>
<li>读入被include的其它Makefile。</li>
<li>初始化文件中的变量。</li>
<li>推导隐晦规则，并分析所有规则。</li>
<li>为所有的目标文件创建依赖关系链。</li>
<li>根据依赖关系，决定哪些目标要重新生成。</li>
<li>执行生成命令</li>
</ol>
<p>1-5步为第一个阶段，6-7为第二个阶段。第一个阶段中，如果定义的变量被使用了，那么，make会把其展开在使用的位置。但make并不会完全马上展 开，make使用的是拖延战术，如果变量出现在依赖关系的规则中，那么仅当这条依赖被决定要使用了，变量才会在其内部展开。</p>
<h3 id="_5">书写规则</h3>
<p>规则包含两个部分，一个是依赖关系，一个是生成目标的方法</p>
<p>在Makefile中，规则的顺序是很重要的，因为，Makefile中只应该有一个最终目标，其它的目标都是被这个目标所连带出来的，所以一定要让 make知道你的最终目标是什么。一般来说，定义在Makefile中的目标可能会有很多，但是第一条规则中的目标将被确立为最终的目标。如果第一条规则 中的目标有很多个，那么，第一个目标会成为最终的目标。make所完成的也就是这个目标。</p>
<h4 id="_6">规则举例</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nf">foo.o </span><span class="o">:</span><span class="w"> </span><span class="n">foo</span>.<span class="n">c</span> <span class="n">defs</span>.<span class="n">h</span> <span class="c"># foo模块</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="err">cc</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">-g</span><span class="w"> </span><span class="err">foo.c</span>
</code></pre></div>
<p>在这个例子中，foo.o是我们的目标，foo.c和defs.h是目标所依赖的源文件，而只有一个命令“cc -c -g foo.c”（以Tab键开头）。这个规则告诉我们两件事：</p>
<ol>
<li>文件的依赖关系，foo.o依赖于foo.c和defs.h的文件，如果foo.c和defs.h的文件日期要比foo.o文件日期要新，或是foo.o不存在，那么依赖关系发生</li>
<li>如果生成（或更新）foo.o文件。也就是那个cc命令，其说明了，如何生成foo.o这个文件。（当然foo.c文件include了defs.h文件）</li>
</ol>
<h4 id="_7">规则的语法</h4>
<p>targets : prerequisites
command
...
或是这样：
targets : prerequisites ; command
command
...</p>
<p>每一行的注释见开篇</p>
<p>注：如果命令太长，你可以使用反斜框（‘\’）作为换行符。make对一行上有多少个字符没有限制。</p>
<p>规则告诉make两件事，<strong>文件的依赖关系和如何成成目标文件</strong></p>
<p>一般来说，make会以UNIX的标准Shell，也就是/bin/sh来执行命令。</p>
<h4 id="_8">在规则中使用通配符</h4>
<p>如果我们想定义一系列比较类似的文件，我们很自然地就想起使用
<span class="remark-container">
    通配符<sup class="remark-tooltip">
        通配符是一类特殊的字符，它们可以代表其他一个或多个字符。在计算机领域，通配符主要用于文件搜索、字符串匹配、数据库查询等场景中，用来简化输入和提高效率。
        以下是两种最常见的通配符及其用法：</p>
<div class="highlight"><pre><span></span><code>    1. 在文件系统和命令行中使用 (Globbing)
      在操作系统命令行中，我们经常使用通配符来匹配文件名或目录名。

       * (星号):

      代表零个或多个任意字符。
      示例:
        .txt: 匹配所有以 .txt 结尾的文件，例如 document.txt, report.txt, .txt。
        data: 匹配所有以 data 开头的文件，例如 data.csv, data_analysis.py, datamodel。
        : 匹配当前目录下所有文件和目录（除了以 . 开头的隐藏文件）。
        doc.*: 匹配所有以 doc 开头，后面跟着任意字符，再接着一个点，再接着任意字符的文件，例如 document.txt, doc.pdf, doc123.log。
      ? (问号):

      代表单个任意字符。
      示例:
        report?.txt: 匹配 report1.txt, reportA.txt, reportX.txt，但不匹配 report10.txt 或 report.txt。
        file_??.log: 匹配 file_01.log, file_AB.log，但不匹配 file_1.log 或 file_123.log。
      [] (方括号):

      代表方括号内任意一个字符集中的字符。
      示例:
        [abc].txt: 匹配 a.txt, b.txt, c.txt。
        file_[0-9].log: 匹配 file_0.log, file_1.log, …, file_9.log。这里 0-9 表示一个范围。
        image_[01]_[abc].jpg: 匹配 image_0_a.jpg, image_0_b.jpg, image_0_c.jpg, image_1_a.jpg, image_1_b.jpg, image_1_c.jpg。
      组合使用:
        [!abc].txt: 匹配所有不是 a, b, c 开头的文件（不常用，取决于 shell 的具体实现）。
        file_[!0-9].log: 匹配文件名 file_ 后面不是数字的文件。
    2. 在字符串匹配和SQL中使用 (Wildcard Characters)
      在数据库查询（SQL）或一些文本处理工具中，也有类似的通配符，但符号可能有所不同。

      SQL 中的 % (百分号):

      代表零个或多个任意字符。
      示例:
        SELECT * FROM customers WHERE name LIKE &#39;A%&#39;; 匹配所有名字以 ‘A’ 开头的客户。
        SELECT * FROM products WHERE code LIKE &#39;%XYZ&#39;; 匹配所有代码以 ‘XYZ’ 结尾的产品。
        SELECT * FROM emails WHERE address LIKE &#39;%@example.com&#39;; 匹配所有域名为 ‘example.com’ 的邮箱地址。
        SQL 中的 _ (下划线):

      代表单个任意字符。
      示例:
        SELECT * FROM employees WHERE employee_id LIKE &#39;EMP_001&#39;; 匹配 EMP_A001, EMP_B001 等（这里假设 _ 匹配的是字母）。
        SELECT * FROM items WHERE item_code LIKE &#39;P__123&#39;; 匹配 PAB123, PXY123 等。
    为什么需要通配符？
    简化操作: 无需输入所有文件名，就能对一组文件执行批量操作（如删除、复制、重命名）。
    提高效率: 快速定位和筛选所需的文件或数据。
    模式匹配: 用于搜索符合特定模式的字符串或数据。
    理解和熟练使用通配符是进行高效文件管理和数据检索的关键。
&lt;/sup&gt;
</code></pre></div>
<p></span>
。make支持三各通配符：“*”，“?”和“[...]”。这是和Unix的B-Shell是相同的。</p>
<p>波浪号（“”）字符在文件名中也有比较特殊的用途。如果是“/test”，这就表示当前用户的$HOME目录下的test目录。而 “~hchen/test”则表示用户hchen的宿主目录下的test目录。（这些都是Unix下的小知识了，make也支持）而在Windows或是 MS-DOS下，用户没有宿主目录，那么波浪号所指的目录则根据环境变量“HOME”而定</p>
<p>通配符代替了你一系列的文件，如“ <em>.c”表示所以后缀为c的文件。</em></p>
<p><strong><em>一个需要我们注意的是，如果我们的文件名中有通配符，如：“</em></strong> <strong>”，那么可以用转义字符“\”，如“<em>”来表示真实的“</em>”字符，而不是任意长度的字符串。</strong></p>
<h4 id="_9">伪目标</h4>
<p>在 Makefile 中，<strong>伪目标 (Phony Targets)</strong>  是指那些<strong>不代表一个实际存在的文件名，而是代表一个特定的动作或命令集</strong>。它们的主要目的是为了执行一些不直接与生成文件相关的操作，例如清理编译产物、运行测试、部署项目等。</p>
<h5 id="_10"><strong>为什么需要伪目标？</strong></h5>
<p>Makefile 的核心思想是根据文件之间的依赖关系来决定是否执行命令。例如，如果你有一个目标 <code>program</code>，它依赖于 <code>main.o</code> 和 <code>utils.o</code>，那么只有当 <code>main.o</code> 或 <code>utils.o</code> 比 <code>program</code> 旧时，Makefile 才会重新编译它们并链接成 <code>program</code>。</p>
<p>然而，很多 Makefile 中的操作并不是为了生成一个具体的物理文件。例如：</p>
<ul>
<li><code>make clean</code>: 这个命令的目的是删除所有编译生成的文件（<code>.o</code> 文件，可执行文件等）。这些文件并不存在于 Makefile 本身中，而是构建过程的产物。如果你直接写 <code>clean:</code>，Makefile 会认为它是一个需要生成的文件，并且不会在 <code>clean</code> 目标比任何文件都“新”时执行。</li>
<li><code>make install</code>: 这个命令可能用于将编译好的程序复制到系统目录。它也不代表一个具体的文件。</li>
<li><code>make test</code>: 这个命令用于运行项目的测试套件。</li>
</ul>
<p>如果不对这些“动作”目标进行特殊处理，Makefile 的一些默认行为可能会导致它们不按预期工作，或者在不应该执行时执行</p>
<p>因为，我们并不生成“clean”这个文件。“伪目标”并不是一个文件，只是一个标签，由于“伪目标”不是文件，所以make无法生成它的依赖关系和决定它是否要执行。我们只有通过显示地指明这个“目标”才能让其生效。当然，“伪目标”的取名不能和文件名重名，不然其就失去了“伪目标”的意义了。</p>
<p>当然，为了避免和文件重名的这种情况，我们可以使用一个特殊的标记“.PHONY”来显示地指明一个目标是“伪目标”，向make说明，不管是否有这个文件，这个目标就是“伪目标”。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nf">.PHONY </span><span class="o">:</span><span class="w"> </span><span class="n">clean</span>
</code></pre></div>
<p>只要有这个声明，不管是否有“clean”文件，要运行“clean”这个目标，只有“make clean”这样。于是整个过程可以这样写：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nf">.PHONY</span><span class="o">:</span><span class="w"> </span><span class="n">clean</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="nf">clean</span><span class="o">:</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="err">rm</span><span class="w"> </span><span class="err">*.o</span><span class="w"> </span><span class="err">temp</span>
</code></pre></div>
<p>伪目标一般没有依赖的文件。但是，我们也可以为伪目标指定所依赖的文件。伪目标同样可以作为“默认目标”，只要将其放在第一个。一个示例就是，如果你的 Makefile需要一口气生成若干个可执行文件，但你只想简单地敲一个make完事，并且，所有的目标文件都写在一个Makefile中，那么你可以使 用“伪目标”这个特性：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nf">all </span><span class="o">:</span><span class="w"> </span><span class="n">prog</span>1 <span class="n">prog</span>2 <span class="n">prog</span>3
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nf">.PHONY </span><span class="o">:</span><span class="w"> </span><span class="n">all</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="nf">prog1 </span><span class="o">:</span><span class="w"> </span><span class="n">prog</span>1.<span class="n">o</span> <span class="n">utils</span>.<span class="n">o</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="err">cc</span><span class="w"> </span><span class="err">-o</span><span class="w"> </span><span class="err">prog1</span><span class="w"> </span><span class="err">prog1.o</span><span class="w"> </span><span class="err">utils.o</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="nf">prog2 </span><span class="o">:</span><span class="w"> </span><span class="n">prog</span>2.<span class="n">o</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="err">cc</span><span class="w"> </span><span class="err">-o</span><span class="w"> </span><span class="err">prog2</span><span class="w"> </span><span class="err">prog2.o</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="nf">prog3 </span><span class="o">:</span><span class="w"> </span><span class="n">prog</span>3.<span class="n">o</span> <span class="n">sort</span>.<span class="n">o</span> <span class="n">utils</span>.<span class="n">o</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="err">cc</span><span class="w"> </span><span class="err">-o</span><span class="w"> </span><span class="err">prog3</span><span class="w"> </span><span class="err">prog3.o</span><span class="w"> </span><span class="err">sort.o</span><span class="w"> </span><span class="err">utils.o</span>
</code></pre></div>
<p>由于Makefile中的第一个目标会被作为其默认目标。我们声明了一个“all”的伪目标，其依赖于其它三个目标。由于伪目标的特性是，总是被执行的<sup>（所以，当你执行 make 时：  make 查看 all。 make 查看 all 的依赖：prog1, prog2, prog3。 make 检查 prog1。如果 prog1.o 或 utils.o 比 prog1 新，make 会执行 cc -o prog1 prog1.o utils.o。 make 检查 prog2。如果 prog2.o 比 prog2 新，make 会执行 cc -o prog2 prog2.o。 make 检查 prog3。如果 prog3.o 或 sort.o 或 utils.o 比 prog3 新，make 会执行 cc -o prog3 prog3.o sort.o utils.o。 如果上述所有检查完成，并且所有必要的命令都已执行，那么 make 就认为 all 的目标已经达到。）</sup>，所以其依赖的那三个目标就总是不如“all”这个目标新。所以，其它三个目标的规则总是会被决议。也就达到了我们一口气生成多个目标的目的。 “.PHONY : all”声明了“all”这个目标为“伪目标”。</p>
<h3 id="_11">注</h3>
<p>本篇是学习<a href="https://tieba.baidu.com/p/591519800?see_lz=1">Makefile详解（超级好）【mingw吧】_百度贴吧</a>这篇文章，有不详明之处可以回去看原文</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../HTML/html5/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 6.23">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                6.23
              </div>
            </div>
          </a>
        
        
          
          <a href="../css/css1/" class="md-footer__link md-footer__link--next" aria-label="Next: 6.25">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                6.25
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.indexes", "navigation.path", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "content.code.copy"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../js/extra.js"></script>
      
    
  </body>
</html>